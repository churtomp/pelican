<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2025 Golf Tournament</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
  <nav class="bg-white shadow-md p-4">
    <div class="container mx-auto flex justify-center items-center">
      <div class="relative">
        <button id="navButton" class="text-blue-600 hover:bg-blue-100 px-3 py-2 rounded-md focus:outline-none">Menu</button>
        <div id="navDropdown" class="hidden absolute mt-2 w-48 bg-white shadow-lg rounded-md py-2 z-10">
          <a href="#leaderboard" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" data-view="leaderboard">Leaderboard</a>
          <a href="#tee-times" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" data-view="tee-times">Tee Times</a>
          <a href="#games-payouts-prizes" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" data-view="games-payouts-prizes">Games/Payouts/Prizes</a>
          <a href="#day1-results" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" data-view="day1-results">Day 1 Results</a>
          <a href="#day2-results" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" data-view="day2-results">Day 2 Results</a>
          <a href="#day3-results" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" data-view="day3-results">Day 3 Results</a>
          <a href="#live-scoring" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" data-view="live-scoring">Live Scoring</a>
        </div>
      </div>
    </div>
  </nav>
  <div class="container mx-auto p-4">
    <h1 id="page-title" class="text-3xl font-bold text-center mb-6">2025 Golf Tournament</h1>
    <div id="content" class="bg-white shadow-md rounded-lg p-4 overflow-x-auto"></div>
    <p id="error" class="text-red-500 text-center mt-4 hidden">Error loading data. Please check your API key or sheet settings.</p>
  </div>

  <script>
    // Google Sheet ID and API Key
    const SHEET_ID = '16gC5ywABEN_2Qap_IlK6pcM_JDeLTp39YHURm8Q4GB8';
    const API_KEY = 'AIzaSyBNneyNevoaa-A8JUAmJOLquLilwVGmj3c';

    // View configurations
    const views = {
      'leaderboard': {
        title: '2025 Golf Tournament Leaderboard',
        fetchData: async () => {
          const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Sheet1!A1:G?key=${API_KEY}`);
          const data = await response.json();
          return data.values ? data.values.slice(1).map(row => [
            row[0], // Player Name
            row[1], // Combined Score
            row[4], // Round 1 Quota
            row[5], // Round 2 Quota
            row[6]  // Round 3 Quota
          ]) : [];
        },
        render: (data) => {
          let html = `
            <table class="w-full text-left">
              <thead>
                <tr class="bg-gray-200">
                  <th class="p-2 cursor-pointer" onclick="sortTable('leaderboard', 0, 'string')">Player Name</th>
                  <th class="p-2 cursor-pointer" onclick="sortTable('leaderboard', 1, 'number')">Combined Score</th>
                  <th class="p-2 cursor-pointer" onclick="sortTable('leaderboard', 2, 'number')">Round 1 Quota</th>
                  <th class="p-2 cursor-pointer" onclick="sortTable('leaderboard', 3, 'number')">Round 2 Quota</th>
                  <th class="p-2 cursor-pointer" onclick="sortTable('leaderboard', 4, 'number')">Round 3 Quota</th>
                </tr>
              </thead>
              <tbody id="leaderboard-body">
                ${data.map(row => `
                  <tr class="border-t">
                    <td class="p-2">${row[0] || ''}</td>
                    <td class="p-2">${row[1] || ''}</td>
                    <td class="p-2">${row[2] || ''}</td>
                    <td class="p-2">${row[3] || ''}</td>
                    <td class="p-2">${row[4] || ''}</td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
            <div class="flex justify-center space-x-4 mt-4">
              <a href="#day1-results" class="text-blue-600 hover:underline" data-view="day1-results">Day 1 Results</a>
              <a href="#day2-results" class="text-blue-600 hover:underline" data-view="day2-results">Day 2 Results</a>
              <a href="#day3-results" class="text-blue-600 hover:underline" data-view="day3-results">Day 3 Results</a>
            </div>
          `;
          return html;
        }
      },
      'tee-times': {
        title: '2025 Golf Tournament Tee Times',
        fetchData: async () => {
          const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/TeeTimes!A1:G?key=${API_KEY}`);
          const data = await response.json();
          return data.values ? data.values.slice(1) : [];
        },
        render: (data) => {
          return `
            <table class="w-full text-left">
              <thead>
                <tr class="bg-gray-200">
                  <th class="p-2">Date</th>
                  <th class="p-2">Course</th>
                  <th class="p-2">Tee Time</th>
                  <th class="p-2">Player 1</th>
                  <th class="p-2">Player 2</th>
                  <th class="p-2">Player 3</th>
                  <th class="p-2">Player 4</th>
                </tr>
              </thead>
              <tbody>
                ${data.map(row => `
                  <tr class="border-t">
                    <td class="p-2">${row[0] || ''}</td>
                    <td class="p-2">${row[1] || ''}</td>
                    <td class="p-2">${row[2] || ''}</td>
                    <td class="p-2">${row[3] || ''}</td>
                    <td class="p-2">${row[4] || ''}</td>
                    <td class="p-2">${row[5] || ''}</td>
                    <td class="p-2">${row[6] || ''}</td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          `;
        }
      },
      'games-payouts-prizes': {
        title: '2025 Golf Tournament Games/Payouts/Prizes',
        fetchData: async () => {
          return [
            ['Net Skins', 'TBD', '$100'],
            ['Low Net', 'TBD', '$150'],
            ['Closest to Pin', 'TBD', 'Golf Gear Set']
          ];
        },
        render: (data) => {
          return `
            <table class="w-full text-left">
              <thead>
                <tr class="bg-gray-200">
                  <th class="p-2">Game</th>
                  <th class="p-2">Winner</th>
                  <th class="p-2">Payout/Prize</th>
                </tr>
              </thead>
              <tbody>
                ${data.map(row => `
                  <tr class="border-t">
                    <td class="p-2">${row[0]}</td>
                    <td class="p-2">${row[1]}</td>
                    <td class="p-2">${row[2]}</td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          `;
        }
      },
      'day1-results': {
        title: '2025 Golf Tournament Day 1 Results',
        fetchData: async () => {
          const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Day1Scores!A1:U?key=${API_KEY}`);
          const handicapResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Day1Scores!A2:U2?key=${API_KEY}`);
          const courseInfoResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Day1Scores!A3:D3?key=${API_KEY}`);
          
          const data = await response.json();
          const handicapData = await handicapResponse.json();
          const courseInfoData = await courseInfoResponse.json();

          return {
            players: data.values ? data.values.slice(1).map(row => ({
              playerName: row[0] || '',
              handicapIndex: parseFloat(row[1]) || 0,
              courseHandicap: parseInt(row[2]) || 0,
              holes: row.slice(3, 21).map(score => parseInt(score) || 0),
              f9Total: parseInt(row[21]) || row.slice(3, 12).reduce((sum, score) => sum + parseInt(score || 0), 0),
              b9Total: parseInt(row[22]) || row.slice(12, 21).reduce((sum, score) => sum + parseInt(score || 0), 0),
              total: parseInt(row[23]) || row.slice(3, 21).reduce((sum, score) => sum + parseInt(score || 0), 0)
            })) : [],
            handicaps: handicapData.values ? handicapData.values[0].slice(3, 21).map(h => parseInt(h) || 0) : [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18],
            courseInfo: courseInfoData.values ? {
              courseName: courseInfoData.values[0][0] || 'Pelican Hill - Ocean North',
              teesPlayed: courseInfoData.values[0][1] || 'Blue',
              rating: parseFloat(courseInfoData.values[0][2]) || 72.5,
              slope: parseInt(courseInfoData.values[0][3]) || 135
            } : { courseName: 'Pelican Hill - Ocean North', teesPlayed: 'Blue', rating: 72.5, slope: 135 }
          };
        },
        render: (data) => {
          return `
            <section class="mb-8">
              <h2 class="text-2xl font-bold mb-4">Course Information</h2>
              <div class="bg-white shadow-md rounded-lg p-4">
                <table class="w-full text-left">
                  <tbody>
                    <tr><td class="p-2 font-medium">Course Name</td><td class="p-2">${data.courseInfo.courseName}</td></tr>
                    <tr><td class="p-2 font-medium">Tees Played</td><td class="p-2">${data.courseInfo.teesPlayed}</td></tr>
                    <tr><td class="p-2 font-medium">Rating</td><td class="p-2">${data.courseInfo.rating.toFixed(1)}</td></tr>
                    <tr><td class="p-2 font-medium">Slope</td><td class="p-2">${data.courseInfo.slope}</td></tr>
                  </tbody>
                </table>
              </div>
            </section>
            <section class="mb-8">
              <h2 class="text-2xl font-bold mb-4">Gross Score</h2>
              <table class="w-full text-left">
                <thead>
                  <tr class="bg-gray-300">
                    <th class="p-2"></th>
                    <th class="p-2"></th>
                    <th class="p-2"></th>
                    ${data.handicaps.slice(0, 9).map(h => `<th class="p-2 text-center">HCP ${h}</th>`).join('')}
                    <th class="p-2"></th>
                    ${data.handicaps.slice(9, 18).map(h => `<th class="p-2 text-center">HCP ${h}</th>`).join('')}
                    <th class="p-2"></th>
                    <th class="p-2"></th>
                  </tr>
                  <tr class="bg-gray-200">
                    <th class="p-2 cursor-pointer" onclick="sortTable('day1-results', 0, 'string')">Player Name</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day1-results', 1, 'number')">Handicap Index</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day1-results', 2, 'number')">Course Handicap</th>
                    <th class="p-2">Hole 1</th>
                    <th class="p-2">Hole 2</th>
                    <th class="p-2">Hole 3</th>
                    <th class="p-2">Hole 4</th>
                    <th class="p-2">Hole 5</th>
                    <th class="p-2">Hole 6</th>
                    <th class="p-2">Hole 7</th>
                    <th class="p-2">Hole 8</th>
                    <th class="p-2">Hole 9</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day1-results', 12, 'number')">F9 Total</th>
                    <th class="p-2">Hole 10</th>
                    <th class="p-2">Hole 11</th>
                    <th class="p-2">Hole 12</th>
                    <th class="p-2">Hole 13</th>
                    <th class="p-2">Hole 14</th>
                    <th class="p-2">Hole 15</th>
                    <th class="p-2">Hole 16</th>
                    <th class="p-2">Hole 17</th>
                    <th class="p-2">Hole 18</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day1-results', 22, 'number')">B9 Total</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day1-results', 23, 'number')">Total</th>
                  </tr>
                </thead>
                <tbody id="day1-results-body">
                  ${data.players.map(row => `
                    <tr class="border-t">
                      <td class="p-2">${row.playerName}</td>
                      <td class="p-2">${row.handicapIndex.toFixed(1)}</td>
                      <td class="p-2">${row.courseHandicap}</td>
                      ${row.holes.slice(0, 9).map(score => `<td class="p-2">${score}</td>`).join('')}
                      <td class="p-2">${row.f9Total}</td>
                      ${row.holes.slice(9, 18).map(score => `<td class="p-2">${score}</td>`).join('')}
                      <td class="p-2">${row.b9Total}</td>
                      <td class="p-2">${row.total}</td>
                    </tr>
                  `).join('')}
                </tbody>
              </table>
            </section>
            <section class="mb-8">
              <h2 class="text-2xl font-bold mb-4">Section 3 (TBD)</h2>
              <p>Placeholder for third section content (e.g., Net Score Table). Please specify content.</p>
            </section>
            <section class="mb-8">
              <h2 class="text-2xl font-bold mb-4">Section 4 (TBD)</h2>
              <p>Placeholder for fourth section content (e.g., Daily Highlights). Please specify content.</p>
            </section>
          `;
        }
      },
      'day2-results': {
        title: '2025 Golf Tournament Day 2 Results',
        fetchData: async () => {
          const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Day2Scores!A1:U?key=${API_KEY}`);
          const handicapResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Day2Scores!A2:U2?key=${API_KEY}`);
          const courseInfoResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Day2Scores!A3:D3?key=${API_KEY}`);
          
          const data = await response.json();
          const handicapData = await handicapResponse.json();
          const courseInfoData = await courseInfoResponse.json();

          return {
            players: data.values ? data.values.slice(1).map(row => ({
              playerName: row[0] || '',
              handicapIndex: parseFloat(row[1]) || 0,
              courseHandicap: parseInt(row[2]) || 0,
              holes: row.slice(3, 21).map(score => parseInt(score) || 0),
              f9Total: parseInt(row[21]) || row.slice(3, 12).reduce((sum, score) => sum + parseInt(score || 0), 0),
              b9Total: parseInt(row[22]) || row.slice(12, 21).reduce((sum, score) => sum + parseInt(score || 0), 0),
              total: parseInt(row[23]) || row.slice(3, 21).reduce((sum, score) => sum + parseInt(score || 0), 0)
            })) : [],
            handicaps: handicapData.values ? handicapData.values[0].slice(3, 21).map(h => parseInt(h) || 0) : [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18],
            courseInfo: courseInfoData.values ? {
              courseName: courseInfoData.values[0][0] || 'Pelican Hill - Ocean South',
              teesPlayed: courseInfoData.values[0][1] || 'Blue',
              rating: parseFloat(courseInfoData.values[0][2]) || 71.8,
              slope: parseInt(courseInfoData.values[0][3]) || 130
            } : { courseName: 'Pelican Hill - Ocean South', teesPlayed: 'Blue', rating: 71.8, slope: 130 }
          };
        },
        render: (data) => {
          return `
            <section class="mb-8">
              <h2 class="text-2xl font-bold mb-4">Course Information</h2>
              <div class="bg-white shadow-md rounded-lg p-4">
                <table class="w-full text-left">
                  <tbody>
                    <tr><td class="p-2 font-medium">Course Name</td><td class="p-2">${data.courseInfo.courseName}</td></tr>
                    <tr><td class="p-2 font-medium">Tees Played</td><td class="p-2">${data.courseInfo.teesPlayed}</td></tr>
                    <tr><td class="p-2 font-medium">Rating</td><td class="p-2">${data.courseInfo.rating.toFixed(1)}</td></tr>
                    <tr><td class="p-2 font-medium">Slope</td><td class="p-2">${data.courseInfo.slope}</td></tr>
                  </tbody>
                </table>
              </div>
            </section>
            <section class="mb-8">
              <h2 class="text-2xl font-bold mb-4">Gross Score</h2>
              <table class="w-full text-left">
                <thead>
                  <tr class="bg-gray-300">
                    <th class="p-2"></th>
                    <th class="p-2"></th>
                    <th class="p-2"></th>
                    ${data.handicaps.slice(0, 9).map(h => `<th class="p-2 text-center">HCP ${h}</th>`).join('')}
                    <th class="p-2"></th>
                    ${data.handicaps.slice(9, 18).map(h => `<th class="p-2 text-center">HCP ${h}</th>`).join('')}
                    <th class="p-2"></th>
                    <th class="p-2"></th>
                  </tr>
                  <tr class="bg-gray-200">
                    <th class="p-2 cursor-pointer" onclick="sortTable('day2-results', 0, 'string')">Player Name</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day2-results', 1, 'number')">Handicap Index</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day2-results', 2, 'number')">Course Handicap</th>
                    <th class="p-2">Hole 1</th>
                    <th class="p-2">Hole 2</th>
                    <th class="p-2">Hole 3</th>
                    <th class="p-2">Hole 4</th>
                    <th class="p-2">Hole 5</th>
                    <th class="p-2">Hole 6</th>
                    <th class="p-2">Hole 7</th>
                    <th class="p-2">Hole 8</th>
                    <th class="p-2">Hole 9</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day2-results', 12, 'number')">F9 Total</th>
                    <th class="p-2">Hole 10</th>
                    <th class="p-2">Hole 11</th>
                    <th class="p-2">Hole 12</th>
                    <th class="p-2">Hole 13</th>
                    <th class="p-2">Hole 14</th>
                    <th class="p-2">Hole 15</th>
                    <th class="p-2">Hole 16</th>
                    <th class="p-2">Hole 17</th>
                    <th class="p-2">Hole 18</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day2-results', 22, 'number')">B9 Total</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day2-results', 23, 'number')">Total</th>
                  </tr>
                </thead>
                <tbody id="day2-results-body">
                  ${data.players.map(row => `
                    <tr class="border-t">
                      <td class="p-2">${row.playerName}</td>
                      <td class="p-2">${row.handicapIndex.toFixed(1)}</td>
                      <td class="p-2">${row.courseHandicap}</td>
                      ${row.holes.slice(0, 9).map(score => `<td class="p-2">${score}</td>`).join('')}
                      <td class="p-2">${row.f9Total}</td>
                      ${row.holes.slice(9, 18).map(score => `<td class="p-2">${score}</td>`).join('')}
                      <td class="p-2">${row.b9Total}</td>
                      <td class="p-2">${row.total}</td>
                    </tr>
                  `).join('')}
                </tbody>
              </table>
            </section>
            <section class="mb-8">
              <h2 class="text-2xl font-bold mb-4">Section 3 (TBD)</h2>
              <p>Placeholder for third section content (e.g., Net Score Table). Please specify content.</p>
            </section>
            <section class="mb-8">
              <h2 class="text-2xl font-bold mb-4">Section 4 (TBD)</h2>
              <p>Placeholder for fourth section content (e.g., Daily Highlights). Please specify content.</p>
            </section>
          `;
        }
      },
      'day3-results': {
        title: '2025 Golf Tournament Day 3 Results',
        fetchData: async () => {
          const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Day3Scores!A1:U?key=${API_KEY}`);
          const handicapResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Day3Scores!A2:U2?key=${API_KEY}`);
          const courseInfoResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Day3Scores!A3:D3?key=${API_KEY}`);
          
          const data = await response.json();
          const handicapData = await handicapResponse.json();
          const courseInfoData = await courseInfoResponse.json();

          return {
            players: data.values ? data.values.slice(1).map(row => ({
              playerName: row[0] || '',
              handicapIndex: parseFloat(row[1]) || 0,
              courseHandicap: parseInt(row[2]) || 0,
              holes: row.slice(3, 21).map(score => parseInt(score) || 0),
              f9Total: parseInt(row[21]) || row.slice(3, 12).reduce((sum, score) => sum + parseInt(score || 0), 0),
              b9Total: parseInt(row[22]) || row.slice(12, 21).reduce((sum, score) => sum + parseInt(score || 0), 0),
              total: parseInt(row[23]) || row.slice(3, 21).reduce((sum, score) => sum + parseInt(score || 0), 0)
            })) : [],
            handicaps: handicapData.values ? handicapData.values[0].slice(3, 21).map(h => parseInt(h) || 0) : [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18],
            courseInfo: courseInfoData.values ? {
              courseName: courseInfoData.values[0][0] || 'Pelican Hill - Ocean North',
              teesPlayed: courseInfoData.values[0][1] || 'Blue',
              rating: parseFloat(courseInfoData.values[0][2]) || 72.5,
              slope: parseInt(courseInfoData.values[0][3]) || 135
            } : { courseName: 'Pelican Hill - Ocean North', teesPlayed: 'Blue', rating: 72.5, slope: 135 }
          };
        },
        render: (data) => {
          return `
            <section class="mb-8">
              <h2 class="text-2xl font-bold mb-4">Course Information</h2>
              <div class="bg-white shadow-md rounded-lg p-4">
                <table class="w-full text-left">
                  <tbody>
                    <tr><td class="p-2 font-medium">Course Name</td><td class="p-2">${data.courseInfo.courseName}</td></tr>
                    <tr><td class="p-2 font-medium">Tees Played</td><td class="p-2">${data.courseInfo.teesPlayed}</td></tr>
                    <tr><td class="p-2 font-medium">Rating</td><td class="p-2">${data.courseInfo.rating.toFixed(1)}</td></tr>
                    <tr><td class="p-2 font-medium">Slope</td><td class="p-2">${data.courseInfo.slope}</td></tr>
                  </tbody>
                </table>
              </div>
            </section>
            <section class="mb-8">
              <h2 class="text-2xl font-bold mb-4">Gross Score</h2>
              <table class="w-full text-left">
                <thead>
                  <tr class="bg-gray-300">
                    <th class="p-2"></th>
                    <th class="p-2"></th>
                    <th class="p-2"></th>
                    ${data.handicaps.slice(0, 9).map(h => `<th class="p-2 text-center">HCP ${h}</th>`).join('')}
                    <th class="p-2"></th>
                    ${data.handicaps.slice(9, 18).map(h => `<th class="p-2 text-center">HCP ${h}</th>`).join('')}
                    <th class="p-2"></th>
                    <th class="p-2"></th>
                  </tr>
                  <tr class="bg-gray-200">
                    <th class="p-2 cursor-pointer" onclick="sortTable('day3-results', 0, 'string')">Player Name</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day3-results', 1, 'number')">Handicap Index</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day3-results', 2, 'number')">Course Handicap</th>
                    <th class="p-2">Hole 1</th>
                    <th class="p-2">Hole 2</th>
                    <th class="p-2">Hole 3</th>
                    <th class="p-2">Hole 4</th>
                    <th class="p-2">Hole 5</th>
                    <th class="p-2">Hole 6</th>
                    <th class="p-2">Hole 7</th>
                    <th class="p-2">Hole 8</th>
                    <th class="p-2">Hole 9</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day3-results', 12, 'number')">F9 Total</th>
                    <th class="p-2">Hole 10</th>
                    <th class="p-2">Hole 11</th>
                    <th class="p-2">Hole 12</th>
                    <th class="p-2">Hole 13</th>
                    <th class="p-2">Hole 14</th>
                    <th class="p-2">Hole 15</th>
                    <th class="p-2">Hole 16</th>
                    <th class="p-2">Hole 17</th>
                    <th class="p-2">Hole 18</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day3-results', 22, 'number')">B9 Total</th>
                    <th class="p-2 cursor-pointer" onclick="sortTable('day3-results', 23, 'number')">Total</th>
                  </tr>
                </thead>
                <tbody id="day3-results-body">
                  ${data.players.map(row => `
                    <tr class="border-t">
                      <td class="p-2">${row.playerName}</td>
                      <td class="p-2">${row.handicapIndex.toFixed(1)}</td>
                      <td class="p-2">${row.courseHandicap}</td>
                      ${row.holes.slice(0, 9).map(score => `<td class="p-2">${score}</td>`).join('')}
                      <td class="p-2">${row.f9Total}</td>
                      ${row.holes.slice(9, 18).map(score => `<td class="p-2">${score}</td>`).join('')}
                      <td class="p-2">${row.b9Total}</td>
                      <td class="p-2">${row.total}</td>
                    </tr>
                  `).join('')}
                </tbody>
              </table>
            </section>
            <section class="mb-8">
              <h2 class="text-2xl font-bold mb-4">Section 3 (TBD)</h2>
              <p>Placeholder for third section content (e.g., Net Score Table). Please specify content.</p>
            </section>
            <section class="mb-8">
              <h2 class="text-2xl font-bold mb-4">Section 4 (TBD)</h2>
              <p>Placeholder for fourth section content (e.g., Daily Highlights). Please specify content.</p>
            </section>
          `;
        }
      },
      'live-scoring': {
        title: '2025 Golf Tournament Live Scoring',
        fetchData: async () => {
          const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/LiveScoring!A1:H?key=${API_KEY}`);
          const data = await response.json();
          return data.values ? data.values.slice(1) : [];
        },
        render: (data) => {
          return `
            <table class="w-full text-left">
              <thead>
                <tr class="bg-gray-200">
                  <th class="p-2">Date</th>
                  <th class="p-2">Course</th>
                  <th class="p-2">Tee Time</th>
                  <th class="p-2">Player 1</th>
                  <th class="p-2">Player 2</th>
                  <th class="p-2">Player 3</th>
                  <th class="p-2">Player 4</th>
                  <th class="p-2">Live Scoring Link</th>
                </tr>
              </thead>
              <tbody>
                ${data.map(row => `
                  <tr class="border-t">
                    <td class="p-2">${row[0] || ''}</td>
                    <td class="p-2">${row[1] || ''}</td>
                    <td class="p-2">${row[2] || ''}</td>
                    <td class="p-2">${row[3] || ''}</td>
                    <td class="p-2">${row[4] || ''}</td>
                    <td class="p-2">${row[5] || ''}</td>
                    <td class="p-2">${row[6] || ''}</td>
                    <td class="p-2"><a href="${row[7] || '#'}" class="text-blue-600 hover:underline" target="_blank">${row[7] ? 'Enter Scores' : 'No Link'}</a></td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          `;
        }
      }
    };

    // Data storage for sorting
    let viewData = {};
    let sortStates = {};

    async function loadView(view) {
      const content = document.getElementById('content');
      const title = document.getElementById('page-title');
      const error = document.getElementById('error');

      error.classList.add('hidden');
      content.innerHTML = 'Loading...';

      try {
        if (!viewData[view]) {
          viewData[view] = await views[view].fetchData();
        }
        title.textContent = views[view].title;
        content.innerHTML = views[view].render(viewData[view]);
        updateActiveMenuItem(view);
      } catch (err) {
        console.error('Error loading view:', err);
        error.classList.remove('hidden');
      }
    }

    function updateActiveMenuItem(view) {
      const menuItems = document.querySelectorAll('#navDropdown a');
      menuItems.forEach(item => {
        item.classList.toggle('font-bold', item.dataset.view === view);
      });
    }

    window.sortTable = function(view, column, type) {
      if (!sortStates[view]) {
        sortStates[view] = { column: -1, direction: 1 };
      }

      if (sortStates[view].column === column) {
        sortStates[view].direction *= -1;
      } else {
        sortStates[view].column = column;
        sortStates[view].direction = 1;
      }

      let data = viewData[view];
      if (view.includes('results')) {
        data = data.players;
      }

      data.sort((a, b) => {
        let valueA = view.includes('results') ? a[Object.keys(a)[column]] : a[column] || '';
        let valueB = view.includes('results') ? b[Object.keys(b)[column]] : b[column] || '';

        if (type === 'number') {
          valueA = parseFloat(valueA) || 0;
          valueB = parseFloat(valueB) || 0;
          return (valueA - valueB) * sortStates[view].direction;
        } else {
          valueA = valueA.toString().toLowerCase();
          valueB = valueB.toString().toLowerCase();
          return valueA.localeCompare(valueB) * sortStates[view].direction;
        }
      });

      if (view.includes('results')) {
        viewData[view].players = data;
      } else {
        viewData[view] = data;
      }

      loadView(view);
    };

    // Navigation dropdown toggle
    document.getElementById('navButton').addEventListener('click', () => {
      const dropdown = document.getElementById('navDropdown');
      dropdown.classList.toggle('hidden');
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', (event) => {
      const dropdown = document.getElementById('navDropdown');
      const button = document.getElementById('navButton');
      if (!button.contains(event.target) && !dropdown.contains(event.target)) {
        dropdown.classList.add('hidden');
      }
    });

    // Handle navigation clicks
    document.querySelectorAll('#navDropdown a').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const view = link.dataset.view;
        history.pushState({ view }, '', `#${view}`);
        loadView(view);
        document.getElementById('navDropdown').classList.add('hidden');
      });
    });

    // Handle browser back/forward
    window.addEventListener('popstate', (e) => {
      const view = e.state ? e.state.view : 'leaderboard';
      loadView(view);
    });

    // Load initial view
    const initialView = window.location.hash.replace('#', '') || 'leaderboard';
    history.replaceState({ view: initialView }, '', `#${initialView}`);
    loadView(initialView);
  </script>
</body>
</html>
